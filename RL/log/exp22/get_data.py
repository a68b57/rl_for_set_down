import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
import numpy as np
from mpl_toolkits.axes_grid1 import host_subplot
import mpl_toolkits.axisartist as AA


# sns.set(color_codes=True)
sns.set(style="darkgrid")


#### for overlapped histo#########
# sns.set(style="white", rc={"axes.facecolor": (0, 0, 0, 0)})
#
# dt_23_7_1 = pd.read_json('following_23.7+1000000_log.csv')
# dt_23_7_2 = pd.read_json('following_23.7+1000000+1000000_log.csv')
# dt_23_7_3 = pd.read_json('following_23.7+1000000+1000000+1000000_log.csv')
#
# d1 = np.array(dt_23_7_1['mean_q'])
# d2 = np.array(dt_23_7_2['mean_q'])
# d3 = np.array(dt_23_7_3['mean_q'])
#
# print(d1)
# print(d2)
# print(d3)

# test_all_data = np.concatenate((d1, d2, d3, d4, d5, d6, d7))
# test_group = np.concatenate((10*np.ones(len(d1)), 30*np.ones(len(d2)), 50*np.ones(len(d3)), 70*np.ones(len(d4)), 90*np.ones(len(d5)),110*np.ones(len(d6)), 130*np.ones(len(d7))))
# df = pd.DataFrame(dict(g=test_group.astype(np.int), impact_velocity=test_all_data))
#
# pal = sns.cubehelix_palette(10, rot=-.25, light=.4)
# g = sns.FacetGrid(df, row="g", hue="g", aspect=2.5, size=1, palette=pal)
#
# g.map(sns.kdeplot, "impact_velocity", clip_on=False, shade=True, alpha=0.5, lw=1.5, bw=.2)
# g.map(sns.kdeplot, "impact_velocity", clip_on=False, color="w", lw=2, bw=.2)
# g.map(plt.axhline, y=0, lw=2, clip_on=False)
#
#
# def label(x, color, label):
#     ax = plt.gca()
#     ax.text(-.15, 0.1, label+'k steps', fontweight="bold", color=color,
#             ha="left", va="center", transform=ax.transAxes)
#
# g.map(label, "impact_velocity")
# g.fig.subplots_adjust(hspace=-0.4)
#
# g.set_titles("")
# g.set(yticks=[])
# g.despine(bottom=True, left=True)
# plt.xlim(-0.1,1)
# plt.show()
####################

##################### overlapped histros in one figure


d1 = np.array([0.584,
0.531,
0.469,
0.437,
0.404,
0.401,
0.382,
0.34,
0.33,
0.329,
0.319,
0.316,
0.309,
0.306,
0.302,
0.285,
0.269,
0.243,
0.242,
0.241,
0.239,
0.237,
0.236,
0.231,
0.23,
0.229,
0.226,
0.225,
0.222,
0.221,
0.22,
0.219,
0.217,
0.212,
0.204,
0.204,
0.201,
0.201,
0.198,
0.196,
0.196,
0.191,
0.191,
0.19,
0.189,
0.186,
0.186,
0.185,
0.185,
0.18,
0.179,
0.178,
0.176,
0.175,
0.175,
0.173,
0.172,
0.172,
0.171,
0.171,
0.168,
0.167,
0.167,
0.166,
0.166,
0.165,
0.163,
0.163,
0.162,
0.16,
0.157,
0.157,
0.157,
0.156,
0.154,
0.154,
0.152,
0.152,
0.149,
0.149,
0.149,
0.147,
0.147,
0.146,
0.146,
0.146,
0.145,
0.145,
0.144,
0.141,
0.141,
0.141,
0.14,
0.14,
0.139,
0.139,
0.137,
0.137,
0.136,
0.136,
0.135,
0.133,
0.132,
0.131,
0.131,
0.13,
0.129,
0.129,
0.129,
0.129,
0.126,
0.126,
0.125,
0.124,
0.124,
0.123,
0.122,
0.122,
0.121,
0.12,
0.12,
0.119,
0.119,
0.118,
0.118,
0.117,
0.117,
0.117,
0.116,
0.116,
0.116,
0.116,
0.115,
0.115,
0.115,
0.114,
0.114,
0.114,
0.114,
0.114,
0.114,
0.113,
0.112,
0.112,
0.112,
0.112,
0.111,
0.111,
0.111,
0.109,
0.108,
0.108,
0.107,
0.107,
0.107,
0.107,
0.106,
0.105,
0.105,
0.105,
0.104,
0.104,
0.103,
0.103,
0.103,
0.103,
0.103,
0.103,
0.102,
0.102,
0.102,
0.102,
0.101,
0.1,
0.1,
0.099,
0.098,
0.098,
0.098,
0.098,
0.098,
0.097,
0.097,
0.097,
0.096,
0.096,
0.096,
0.096,
0.095,
0.095,
0.095,
0.095,
0.094,
0.093,
0.093,
0.093,
0.093,
0.093,
0.093,
0.093,
0.093,
0.093,
0.092,
0.091,
0.091,
0.091,
0.09,
0.089,
0.089,
0.089,
0.088,
0.088,
0.088,
0.088,
0.087,
0.087,
0.087,
0.087,
0.086,
0.086,
0.085,
0.085,
0.084,
0.083,
0.083,
0.083,
0.083,
0.083,
0.083,
0.082,
0.082,
0.082,
0.082,
0.082,
0.081,
0.081,
0.081,
0.081,
0.081,
0.081,
0.08,
0.08,
0.08,
0.08,
0.08,
0.08,
0.08,
0.079,
0.078,
0.078,
0.078,
0.078,
0.077,
0.077,
0.077,
0.077,
0.077,
0.076,
0.076,
0.076,
0.076,
0.076,
0.076,
0.075,
0.075,
0.075,
0.075,
0.074,
0.074,
0.074,
0.073,
0.073,
0.073,
0.073,
0.073,
0.072,
0.072,
0.072,
0.072,
0.071,
0.071,
0.071,
0.071,
0.071,
0.071,
0.071,
0.071,
0.071,
0.07,
0.07,
0.07,
0.07,
0.069,
0.069,
0.069,
0.069,
0.069,
0.068,
0.068,
0.068,
0.068,
0.068,
0.068,
0.067,
0.067,
0.067,
0.067,
0.067,
0.066,
0.066,
0.066,
0.066,
0.066,
0.066,
0.065,
0.065,
0.065,
0.065,
0.065,
0.065,
0.064,
0.064,
0.063,
0.063,
0.063,
0.063,
0.063,
0.062,
0.062,
0.062,
0.062,
0.062,
0.061,
0.061,
0.061,
0.061,
0.061,
0.061,
0.061,
0.06,
0.06,
0.06,
0.06,
0.06,
0.06,
0.06,
0.06,
0.06,
0.06,
0.059,
0.059,
0.059,
0.059,
0.058,
0.058,
0.058,
0.058,
0.058,
0.058,
0.057,
0.057,
0.057,
0.057,
0.055,
0.055,
0.055,
0.055,
0.055,
0.054,
0.054,
0.054,
0.054,
0.054,
0.053,
0.053,
0.053,
0.053,
0.053,
0.053,
0.053,
0.052,
0.052,
0.051,
0.051,
0.051,
0.051,
0.05,
0.05,
0.05,
0.05,
0.05,
0.05,
0.05,
0.049,
0.049,
0.049,
0.049,
0.049,
0.049,
0.049,
0.048,
0.048,
0.048,
0.048,
0.047,
0.047,
0.047,
0.047,
0.047,
0.047,
0.047,
0.047,
0.047,
0.047,
0.046,
0.046,
0.046,
0.046,
0.046,
0.046,
0.045,
0.045,
0.044,
0.044,
0.044,
0.043,
0.043,
0.043,
0.043,
0.043,
0.043,
0.043,
0.042,
0.042,
0.042,
0.042,
0.041,
0.041,
0.041,
0.041,
0.04,
0.04,
0.04,
0.04,
0.039,
0.039,
0.038,
0.038,
0.038,
0.037,
0.037,
0.037,
0.037,
0.037,
0.036,
0.036,
0.036,
0.036,
0.036,
0.036,
0.035,
0.034,
0.034,
0.034,
0.034,
0.034,
0.033,
0.033,
0.032,
0.032,
0.031,
0.031,
0.031,
0.03,
0.03,
0.03,
0.029,
0.028,
0.027,
0.027,
0.026,
0.025,
0.025,
0.024,
0.024,
0.023,
0.022,
0.022,
0.022,
0.02,
0.02,
0.019,
0.018,
0.016,
0.015,
0.013,
0.012,
0.011,
0.007,
])
d2 = np.array([0.57851578728279,
0.556922746452146,
0.544941735221993,
0.528315301090316,
0.521912143877561,
0.511445244553421,
0.496549640566686,
0.48634053059943,
0.472721243558141,
0.46416730169784,
0.453505191182657,
0.44059840550629,
0.439748467805607,
0.403944556637459,
0.402647530703799,
0.399473050190799,
0.390368033858861,
0.38531802372102,
0.376418039249433,
0.373880668516149,
0.370367375474316,
0.367541544306347,
0.366125461398354,
0.350111177218846,
0.346123850072093,
0.332530884441979,
0.332247559584129,
0.332196883260858,
0.330649900376834,
0.330201322045705,
0.329067780612942,
0.326056725930686,
0.323415115156154,
0.323258130893693,
0.321878806907092,
0.320631489881347,
0.319067414434757,
0.31285129263857,
0.312750278541074,
0.312183741000132,
0.309656480323959,
0.308896229039179,
0.308824970633621,
0.307190161895123,
0.303384005260767,
0.298603135432662,
0.297268485763702,
0.295926847599643,
0.295139591693179,
0.291928858436963,
0.289742009016933,
0.289216150596214,
0.287921920863425,
0.278882840473056,
0.278295627778577,
0.276457524456193,
0.273012844813278,
0.272387847333801,
0.271798107812939,
0.271682464790244,
0.270894885224129,
0.270687154903548,
0.270214512064602,
0.269425461933004,
0.261567598271446,
0.260206142326602,
0.258469966453161,
0.25697421226738,
0.256732243988909,
0.256642125393292,
0.25520475814937,
0.255138650825986,
0.253456973871096,
0.252430454148707,
0.25151990840202,
0.249874225621172,
0.249515057434211,
0.248063081046732,
0.245404340873367,
0.245285943159388,
0.245280029460009,
0.244874877984111,
0.244765066305312,
0.240119953618345,
0.239926988955412,
0.239123037331304,
0.238492939007378,
0.236167941675935,
0.235967823538221,
0.234861822537171,
0.233661373684102,
0.233646523465403,
0.233070205385593,
0.232532172960074,
0.232043087424536,
0.231294695730737,
0.230288520986504,
0.230038992396748,
0.229933514356562,
0.229886206065881,
0.229459730289072,
0.228682119132575,
0.227210540185281,
0.226227433053152,
0.2254866275754,
0.225026415816529,
0.223773969623435,
0.223681839391991,
0.220414424492397,
0.218362405469694,
0.218288628797865,
0.217650313130244,
0.214591784525444,
0.213838705407285,
0.213463606781925,
0.21272759865294,
0.211688983097913,
0.211102385697357,
0.210821244312358,
0.209241024009437,
0.20785104011555,
0.20728055463664,
0.206781370313314,
0.206192595442234,
0.206175063343279,
0.204918055079757,
0.2047208478435,
0.204290379687313,
0.203934950694666,
0.203694577910065,
0.203485584025369,
0.203130986289741,
0.20291288344664,
0.202331373503002,
0.201472920579588,
0.199467996983707,
0.19935978440528,
0.199251308513553,
0.198925580373057,
0.198214496796707,
0.197750831766355,
0.197693788369744,
0.196698180085857,
0.195653145151997,
0.19458587180277,
0.193884211410706,
0.193159381362218,
0.192880122868608,
0.192279187822661,
0.192089735425434,
0.191904561650524,
0.190810475384149,
0.190515357265308,
0.190242896892245,
0.190147894087485,
0.18963847438286,
0.189574485641915,
0.189119379629492,
0.188889083988704,
0.18867111865779,
0.188133209153936,
0.18778199363652,
0.187498325835538,
0.187135339410593,
0.185766885028871,
0.185532392065602,
0.185299113192334,
0.184566986189365,
0.184295096999998,
0.184262680770164,
0.184233895874701,
0.184128854273791,
0.183975431271097,
0.18368021981007,
0.182725653878162,
0.18261367371629,
0.182444747918646,
0.181949065525693,
0.18135309100983,
0.180941143692124,
0.180773079148349,
0.180669435314806,
0.179770037929448,
0.179699134189422,
0.179399124264021,
0.179285473536881,
0.179115867117279,
0.17877419424317,
0.178608973519561,
0.178607692247441,
0.178057697915426,
0.17717316271928,
0.176757167529269,
0.176438733385691,
0.176313509492374,
0.176301056937387,
0.175837539647219,
0.175266833391374,
0.17525407424011,
0.175244220929276,
0.17524021593454,
0.174181496379715,
0.173308441313544,
0.172149996992594,
0.171970714400915,
0.17183081177568,
0.171827309223174,
0.171160466984048,
0.17080921032079,
0.169335312707446,
0.16849058504147,
0.16844770774135,
0.166461339055442,
0.166060633772771,
0.166017804428451,
0.165952610704778,
0.165910546471215,
0.165468378788196,
0.16508517557889,
0.164905739335337,
0.16428195352522,
0.16364208534954,
0.163341691757131,
0.163005299124572,
0.162378018157661,
0.162263970658056,
0.16207790187198,
0.16153904914046,
0.161397400796268,
0.161389309788555,
0.161111152277291,
0.160698583382874,
0.159659611163088,
0.159355013930069,
0.158320177598625,
0.158190932762388,
0.158163490187402,
0.157666875759679,
0.157482247844412,
0.157435844620917,
0.15701830125602,
0.156766308451726,
0.154515708710878,
0.153953155081634,
0.15296910183408,
0.152680275750958,
0.151951047950547,
0.151474942988914,
0.151168627977158,
0.150034002566182,
0.149571337119987,
0.147184500899193,
0.146673032327174,
0.146540655208831,
0.146523370821399,
0.146014906095129,
0.14573346032182,
0.145691948309414,
0.145333139745132,
0.1449187784847,
0.144867270852949,
0.144468985068658,
0.144338231342873,
0.144318458326946,
0.144313720624112,
0.144300695127981,
0.144176468901751,
0.143417455564512,
0.143349482411441,
0.143112711147237,
0.142937026391685,
0.142336595358827,
0.141966121481012,
0.14195415370577,
0.141829231687431,
0.140412277987068,
0.139890538314695,
0.139426442428086,
0.139224800280537,
0.138566611512641,
0.138445156676168,
0.138390951063521,
0.138271818758291,
0.137922882232751,
0.137699261441284,
0.137399373854636,
0.137246603387613,
0.136857645823438,
0.136795953213627,
0.13672470640131,
0.136560558287018,
0.136458991899264,
0.136091278274186,
0.134846792593901,
0.134837576072675,
0.1343868491346,
0.133008264223573,
0.132733303441341,
0.132393914355973,
0.132235002318675,
0.131908559173368,
0.131590824383903,
0.131242232586661,
0.13112009659352,
0.130920683834574,
0.129828614522722,
0.12966448580312,
0.12915644060036,
0.129102273122745,
0.128938199921951,
0.128318683927136,
0.127656952366229,
0.127534820958077,
0.127512630833841,
0.126578100792774,
0.126453808136908,
0.125906779115264,
0.125541752150875,
0.125407291991868,
0.125367274518648,
0.124795460101197,
0.124650513731641,
0.124292162925608,
0.123954593903584,
0.123146151348728,
0.122832892249374,
0.122791946862844,
0.120862040227392,
0.120350985097639,
0.11960337140942,
0.119561263652148,
0.119127698329899,
0.119020413748885,
0.118268386992151,
0.118184407092254,
0.116596668821929,
0.116231564075315,
0.116141888780605,
0.114596835481837,
0.114116546803107,
0.113065298901978,
0.111884621819138,
0.110915876393944,
0.110060456346455,
0.109655064070529,
0.109101149082473,
0.108403898395473,
0.108031924199619,
0.107631288460492,
0.107197410930393,
0.107118016770631,
0.107114739027674,
0.106591862561061,
0.106545979145043,
0.10640201865006,
0.106090023677634,
0.104708220595926,
0.103977729863711,
0.103801113159516,
0.103680129135988,
0.103574456192854,
0.103543909581649,
0.10336822182027,
0.103356545759983,
0.102875130750073,
0.101705120816895,
0.10120762642055,
0.100441218448415,
0.0996299224046737,
0.0995477247352206,
0.0993923794620244,
0.0981320799063212,
0.0965706311733783,
0.0964180657019309,
0.0962442996397695,
0.0959992027004031,
0.0958670618104929,
0.095643132277905,
0.095535903290287,
0.0954953758292731,
0.0941799289907319,
0.0941447363277703,
0.093831345715838,
0.0936471614616341,
0.0936319453783163,
0.0935743226140762,
0.0931719534813258,
0.0931261550054252,
0.0928335103289424,
0.0927451244550426,
0.092629707311378,
0.0925888752968884,
0.092033809733687,
0.0899687591919207,
0.0896367876749604,
0.0894641211818037,
0.0894417745074616,
0.0892726549066936,
0.0888513690359894,
0.0885110370691589,
0.088201382155555,
0.0873883869436209,
0.0867745983539159,
0.0866746778966743,
0.0860276442252683,
0.0858385336965917,
0.0852492481530387,
0.0850255975166814,
0.0844328690057328,
0.0840231869268582,
0.0834421204473834,
0.0831958060172244,
0.0828264956027258,
0.0811229258285806,
0.0742783461503471,
0.0742421343707278,
0.0723162906656327,
0.0722026758147454,
0.0720581508258977,
0.0711605917280433,
0.0709505418749323,
0.0704544714783317,
0.0700711375219409,
0.069865454998661,
0.0694878274179622,
0.0692929327181613,
0.0688023223545731,
0.0683109985306718,
0.0679621806237574,
0.0668765934765858,
0.066382198837136,
0.0661021028338826,
0.0652172417806263,
0.0647884897177598,
0.0644693847023792,
0.0639951170360842,
0.0636980927192798,
0.0625956590816124,
0.0625763079309927,
0.0623215726823645,
0.0591024185075995,
0.0586678105576066,
0.0574105126591373,
0.0571729763396878,
0.0567277263612365,
0.0564309488757786,
0.055543514046672,
0.0549826105736262,
0.0544078814033799,
0.0540735774191425,
0.0513907032187611,
0.0494863989917249,
0.0488308350013877,
0.0478253752961244,
0.0472282850738282,
0.0441742436756609,
0.0436943674883583,
0.0431705868143517,
0.0420930830269661,
0.041471717444761,
0.0400313153461074,
0.0375106859230723,
0.0372739366294539,
0.0356685249152111,
0.0355882948283437,
0.0260122369455207,
0.0237712915031008,
0.0226159054007535,
0.0223676633680725,
0.0210298760413519,
0.0158076000474416,
0.0134673098546845,
0.0119181070118835,
])
# d3 = np.array([])

sns.kdeplot(d1, label='Comb.', shade=True, color='g')
sns.kdeplot(d2, label='Only policy', shade=True, color='r')
# sns.kdeplot(d3, label='Only MCTS', shade=True)

# label = 'mean:{:.4f}, std:{:.4f}'.format(np.mean(d1), np.std(d1))
# sns.kdeplot(d1, label=label, shade=True)

plt.xlim(-0.05,0.8)
plt.xlabel('impact velocity (m/s)')
plt.title('Hs:1.5, Tp:8')
plt.show()
###################################################

######show tsplot###########
# window = 300
#
#
# def running_mean(x, N):
#     cumsum = np.cumsum(np.insert(x, 0, 0))
#     return (cumsum[N:] - cumsum[:-N]) / float(N)
#
#
# cur1 = pd.read_json('following_24.1_log.csv')['episode_reward']
# cur2 = pd.read_json('following_24.1_log.csv')['mean_q']
#
# cur1 = running_mean(np.array(cur1), window)
# std_cur1 = np.std(cur1)
#
# cur2 = running_mean(np.array(cur2), window)
# std_cur2 = np.std(cur2)
#
# l = min(len(cur1),len(cur2))
# C_params = np.linspace(1, l, l)
# cur1 = cur1[0:l]
# cur2 = cur2[0:l]
#
# cur1_min = 0
# cur1_max = 150
#
# cur2_min = 0
# cur2_max = 150
#
# sns.set_style("darkgrid")
#
#
# host = host_subplot(111, axes_class=AA.Axes)
# plt.subplots_adjust(right=0.75)
#
# par1 = host.twinx()
#
# new_fixed_axis_1 = par1.get_grid_helper().new_fixed_axis
# par1.axis["left"] = new_fixed_axis_1(loc="right",
#                                     axes=par1,
#                                     offset=(0, 0))
#
# par1.axis["left"].toggle(all=True)
#
#
# host.set_ylim(cur1_min, cur1_max)
# host.set_xlabel("episode")
# par1.set_ylabel("mean Q-value")
# host.set_ylabel("episode reward")
#
# p1, = host.plot(C_params, cur1,label="episode reward", color='red')
# p2, = par1.plot(C_params, cur2, label="mean Q", color='green')
# host.fill_between(C_params, cur1 - std_cur1, cur1 + std_cur1, alpha = 0.1, color="red")
# par1.fill_between(C_params, cur2 - std_cur2, cur2 + std_cur2, alpha = 0.1, color="green")
# par1.set_ylim(cur2_min, cur2_max)
# host.legend()
#
# host.axis["left"].label.set_color(p1.get_color())
# par1.axis["left"].label.set_color(p2.get_color())
#
# host.axis["left"].major_ticklabels.set_color(p1.get_color())
# par1.axis["left"].major_ticklabels.set_color(p2.get_color())
#
# plt.title('Initial distance: 3m, Hs:1, Tp:8')
# plt.draw()
# plt.show()
#





